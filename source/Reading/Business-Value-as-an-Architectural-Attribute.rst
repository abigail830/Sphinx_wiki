Business Value as an Architectural Attribute
=============================================================

业务价值即架构属性
----------------------

  Reference: https://martinfowler.com/articles/value-architectural-attribute.html
  
我们和我们的同事经常被要求为客户执行架构评估。我们与这些系统相关的架构师会讨论这些系统的性能、弹性，以及如何轻松地支持新功能。然而，很少涉及到不同的系统如何贡献业务价值，以及这些价值如何与其他架构属性协同。

如果不理解价值，许多架构决策就会变得更加困难。在一个例子中，我们被问及如何向交易系统添加容错。通过热故障转移（hot failover)到另一个服务器的成本在数万美元左右。这种代价合理吗?我们的方法是询问通过该系统做交易产生的价值，以及这些交易给客户带来了多少收入。一旦他们调查发现系统每天要处理数百万美元的交易，那添加容错功能就变得很顺理成章了。

这个故事的重要之处在于，客户团队并没有将业务价值作为决策的一部分(尽管其中肯定有教训)。架构团队不知道他们的系统的价值是什么，或者不同的组件如何对更广泛的业务性能做出贡献。我们发现这是思维上的一个普遍缺陷，当我们做这些评估时，我们通常会要求与财务部门的相关人员交谈。人们通常会问:“你为什么要和他们聊?”

在另一个例子中，一家保险公司要求我们帮助他们将单体系统拆分成微服务。他们已经合理地认识到，他们想要通过不同的产品线(家庭、个人、汽车等)来区分它们。但他们不清楚这些产品线分别给公司利润的贡献比例，这是决定像这样的拆分项目排列优先级的一个重要因素。从价值的角度来说，第一个分离的项目可能不是最重要的，因为第一次分离将面临很多首次尝试带来的风险。但是一旦一个团队实践了分离，那么我们应该分离最有价值的产品线，使其更容易修改和扩展。


用价值流映射检验架构
---------------------

评估体系结构中的业务价值的第一步是对IT环境中的各种系统和组件进行价值流映射。业务通常会对业务流程进行某种价值流映射，检查客户旅程的每个部分是如何影响收入和利润的，但通常一旦他们到达目的地，映射就会停止，也不会尝试通过各种系统来映射价值流。

架构师应该以此为基础，将类似的业务度量分配给支持业务流程的系统，并将映射扩展到这些系统中。除了财务措施外，重要的非财务措施也可以考虑：您的客户在线检查其索赔状态的能力在多大程度上影响客户留存?(这类指标通常更难制定，但思考如何衡量它们往往可以得出重要的见解。)

对于最近的一个客户，我们进行了这样一个练习，从描述客户如何与客户公司交互的客户旅程开始。我们将这些步骤放在团队室的墙上，然后将每个步骤与客户的IT投资组合中的系统和组件联系起来。然后，我们可以评估每个系统如何对客户旅程中的步骤做出贡献，以及失败可能带来的影响。

考虑失败对业务价值的影响
----------------------------

正如我们的第一个例子所示，在评估失败的后果时，有一个特别重要的因素。如果我们想要采取措施来提高一个系统的弹性，最好是用它失败时的风险价值来表达它。一家零售商正在努力证明他们备份数据库的恢复过程是正确的。由于圣诞节前需要大量的业务可见特性，因此很难对这样的技术任务进行优先级排序。我们的建议是询问企业对“黑色星期五”数据库崩溃的感受:成本是多少，他们希望系统多快恢复?这些问题导致了一个由业务主导的决策，即围绕数据库恢复进行彩排，并缩短恢复时间，否则恢复时间将被淹没在IT的工作队列中。

在进行风险价值评估时，有两种值得称赞的方法。一种方法是自顶向下，查看业务功能并确定哪些软件系统支持该功能。另一个是相反的，从一个软件系统开始，并考虑失败会产生什么后果。

风险价值分析的一个重要部分是认识到，由于不同的失败有不同的严重后果，所以所有的软件组件不需要相同的弹性级别。想象一下股票管理系统在Boxing day(相当于英国的黑色星期五)出现故障。如果这意味着无法查看库存，那我们要么确认无法完成的订单，要么不接受订单， 这两种情况都会造成重大损失。然而，在执行系统中出现故障可能导致订单在队列中等待处理，这可能会导致延迟交付。商业领袖可能会认为后一种情况不太值得关注，因此，他们要准备好面对这种架构的较弱弹性。不管具体场景是什么，弹性的程度应该是一个商业决策。数据一致性也是如此。在查看分布式数据库时，架构师通常不愿放松可用性的一致性。但是，重复预订几间酒店房间的商业成本可能比根本不接受预订要少得多。在一致性和可用性之间进行权衡是一个商业决策，而不是一个技术决策。

跨功能需求应该由业务价值来证明
---------------------------------------

这里的一个主题是，我们不应该只是评估特性的价值，还应该评估经常被归类为跨功能需求的系统特性(即非功能性需求，如“性能”)。如果我们想让我们的系统遵循一些技术标准，那么我们需要了解如果不这样做，将会失去什么价值，并将这些价值传达给非技术人员。评估CFRs的价值通常是困难的，许多技术人员回避由此产生的争论。但如果做不到这一点，造成的危害将不仅仅是过度投资于低价值技术的风险。它也给技术人员和他们的用户之间的合作设置了一个真正的障碍。

理解价值应该有助于做出对于组件灵活性需求的决策。一个客户有一个支付处理组件，该组件被编程为与特定的支付处理公司一起工作。他们希望它易于配置，以便在支付处理器发生变化时能够快速调整。存在两种广泛的选择。一个是在支付处理组件中硬编码与支付提供者系统的交互，而另一个选项使所有这些交互都是可配置的。可配置选项允许在几天内通过更改配置文件来更改支付提供者。然而，通常情况下，这种可配置性会增加组件代码的复杂性，从而增加任何其他更改的成本。这是与可配置性之间的一种常见的折衷——您可以以在其他地方进行更困难的更改为代价来简化可配置位的更改。这里至关重要的一点是，改变支付提供商的过程中最困难的部分实际上是协商一份新的法律合同——这项工作通常需要一年多的时间。因此，在这里配置提供者信息是不值得的，因为修改一个不可配置的组件仍然比法律协商快得多。
